#!/bin/sh

# Determine path to this script's directory.
dir="$(pwd)"
bin="$0"
while [ -L "${bin}" ]
do
    x="$(readlink "${bin}")"
    cd "$(dirname "${bin}")"
    bin="${x}"
done
cd "$(dirname "${bin}")"/.. || exit 1
home="$(pwd)"

# Configure platforms.
case `uname` in
  Darwin)
    cd "${HOME}/Downloads" || exit 2
    bin=Tarsnap
    log="${HOME}/Library/Logs/tarsnap-gui.log";;
  *)
    cd "${HOME}" || exit 2
    bin=tarsnap-gui
    log="${HOME}/tarsnap-gui.log";;
esac

# Run tarsnap-gui, logging to ${log}.
2>&1 "${home}/${bin}" "$@" | tee -a "${log}"
